<!doctype html>
<html lang="es-CL">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Libro de Clases ‚Äî Jard√≠n Patito</title>

  <!-- Bootstrap 5 -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
        rel="stylesheet" crossorigin="anonymous"/>

  <!-- Tus estilos (incluye reglas de impresi√≥n que ya ten√≠as) -->
  <link rel="stylesheet" href="styles.css" />
</head>
<body class="bg-body-tertiary">

  <!-- Topbar (acciones √∫nicas) -->
  <header class="bg-body border-bottom sticky-top">
    <div class="container-fluid py-2">
      <div class="row g-3 align-items-end">
        <div class="col-12 col-lg-auto">
          <div class="fs-5 fw-bold">üê• Jard√≠n Patito</div>
        </div>

        <div class="col-12 col-sm-6 col-lg-4">
          <label class="form-label mb-1" for="salaSelect">Sala</label>
          <select id="salaSelect" class="form-select"></select>
        </div>

        <div class="col-12 col-sm-6 col-lg-3">
          <label class="form-label mb-1" for="fechaInput">Fecha</label>
          <input id="fechaInput" type="date" class="form-control" />
        </div>

        <div class="col-12 col-lg text-lg-end">
          <div class="d-flex flex-wrap gap-2 justify-content-start justify-content-lg-end">
            <button id="btnAddAlumno" class="btn btn-primary">‚ûï Alumno</button>
            <button id="btnReporte" class="btn btn-outline-secondary">üñ®Ô∏è Reporte del d√≠a</button>
            <button id="btnExport" class="btn btn-outline-success">‚¨áÔ∏è Exportar</button>
            <input id="fileImport" type="file" accept="application/json" hidden />
            <button id="btnImport" class="btn btn-outline-info">‚¨ÜÔ∏è Importar</button>
            <span id="estadoGuardado" class="ms-1 small text-secondary align-self-center">‚óè Guardado</span>
          </div>
        </div>
      </div>
    </div>
  </header>

  <!-- Layout principal -->
  <main class="container-fluid my-3">
    <div class="row g-3">
      <aside class="col-12 col-lg-3">
        <div class="card h-100 shadow-sm">
          <div class="card-body">
            <h5 class="card-title">Filtros</h5>
            <div class="mb-3">
              <input id="buscarInput" type="search" class="form-control" placeholder="Buscar alumno‚Ä¶" />
            </div>
            <div class="mb-3">
              <label class="form-label" for="filtroEstado">Estado</label>
              <select id="filtroEstado" class="form-select">
                <option value="ALL">Todos</option>
                <option value="P">Presentes</option>
                <option value="A">Ausentes</option>
                <option value="T">Tarde</option>
                <option value="J">Justificados</option>
              </select>
            </div>
            <div class="form-check">
              <input class="form-check-input" type="checkbox" id="soloObs">
              <label class="form-check-label" for="soloObs">Con observaciones</label>
            </div>
            <p class="text-body-secondary small mt-3 mb-0">
              Tip: usa P/A/T/J para marcar asistencia. Guardado autom√°tico en tu navegador.
            </p>
          </div>
        </div>
      </aside>

      <section class="col-12 col-lg-6">
        <div id="gridAlumnos" class="row row-cols-1 row-cols-sm-2 g-3" aria-live="polite"></div>
      </section>

      <aside class="col-12 col-lg-3">
        <div class="card h-100 shadow-sm">
          <div class="card-body">
            <h5 class="card-title mb-0">Observaciones del d√≠a</h5>
            <input id="buscarObs" type="search" class="form-control mt-3" placeholder="Filtrar‚Ä¶">
            <div id="listaObservaciones" class="list-group mt-3"></div>
          </div>
        </div>
      </aside>
    </div>
  </main>

  <!-- Barra inferior: solo contadores -->
  <footer class="sticky-bottom-bar bg-body border-top">
    <div class="container-fluid py-2 d-flex flex-wrap gap-2 align-items-center justify-content-between">
      <div id="resumenContadores" class="fw-semibold">P:0 A:0 T:0 J:0</div>
    </div>
  </footer>

  <!-- √Årea de reporte (solo para impresi√≥n) -->
  <section id="printArea" class="container my-4"></section>

  <!-- Plantilla de tarjeta -->
  <template id="tplCard">
    <div class="col">
      <article class="card h-100 shadow-sm alumno-card" data-id="">
        <div class="card-body">
          <div class="d-flex align-items-center gap-3">
            <div class="avatar flex-shrink-0"></div>
            <h6 class="mb-0 alumno-nombre text-truncate"></h6>
          </div>
          <div class="btn-group w-100 mt-3" role="group" aria-label="Asistencia">
            <button type="button" class="btn btn-outline-success estado-btn" data-v="P" title="Presente">P</button>
            <button type="button" class="btn btn-outline-danger  estado-btn" data-v="A" title="Ausente">A</button>
            <button type="button" class="btn btn-outline-warning estado-btn" data-v="T" title="Tarde">T</button>
            <button type="button" class="btn btn-outline-info    estado-btn" data-v="J" title="Justificado">J</button>
          </div>
          <div class="mt-3">
            <button class="btn btn-sm btn-outline-secondary" data-bs-toggle="collapse">‚úé Observaci√≥n</button>
            <div class="collapse mt-2 obs-wrap">
              <textarea class="form-control obs-text" rows="3" placeholder="Escribe una observaci√≥n‚Ä¶"></textarea>
              <div class="form-check mt-2">
                <input class="form-check-input flag-importante" type="checkbox">
                <label class="form-check-label">Marcar como importante</label>
              </div>
            </div>
          </div>
        </div>
      </article>
    </div>
  </template>

  <!-- Scripts -->
  <script defer src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
          crossorigin="anonymous"></script>
  <script defer src="app.js"></script>
</body>
</html>
